<div id="header">
  <h1 class="site">
    <a href="{{ link }}">
      <div>
        <img
          src="assets/img/github/GitHub_Logo_White.png"
          title="Acesse a página no GitHub"
          height="60px"
        />
      </div>
    </a>
  </h1>
</div>
<div id="body">
  <div class="filter">
    <h4>
      Filtros:
    </h4>
    <div class="container">
      <div>
        <label for="name-filter">Nome</label>
        <input id="name-filter" [(ngModel)]="filter.name" />
      </div>
      <div>
        <label for="desc-filter">Descrição</label>
        <input id="desc-filter" [(ngModel)]="filter.desc" />
      </div>
      <div>
        <label for="lang-filter">Linguagem</label>
        <select id="lang-filter" [(ngModel)]="filter.lang">
          <option value="">Sem filtro</option>
          <option *ngFor="let language of langNames" [value]="language">{{
            language
          }}</option>
        </select>
      </div>
      <div>
        <label for="project-filter">Projeto</label>
        <select id="project-filter" [(ngModel)]="filter.project">
          <option value="">Sem filtro</option>
          <option *ngFor="let project of projects" [value]="project.id">{{
            project.name
          }}</option>
        </select>
      </div>
      <div>
        <input
          class="ok-btn"
          type="button"
          value="Filtrar"
          (click)="updateRepositories()"
        />
      </div>
      <div>
        <input
          class="clear-btn"
          type="button"
          value="Limpar"
          (click)="clearFilters()"
        />
      </div>
    </div>
  </div>
  <table>
    <tbody>
      <tr class="main-header">
        <th colspan="3">Projetos</th>
      </tr>
      <tr>
        <th>Projeto</th>
        <th colspan="2">Descrição</th>
      </tr>
      <tr *ngFor="let repo of repositories$ | async">
        <td>
          <div>
            <h3>
              <ng-container *ngIf="!repo.homepage; else link">
                {{ repo.name }}
              </ng-container>
              <ng-template #link>
                <a href="{{ repo.homepage }}">{{ repo.name }}</a>
              </ng-template>
            </h3>
          </div>
          <div class="github-logo">
            <a href="{{ repo.html_url }}">
              <img
                src="assets/img/github/GitHub_Logo.png"
                alt="GitHub"
                title="Código fonte: GitHub"
              />
            </a>
          </div>
          <div class="language-extra">
            <ng-container
              *ngIf="
                getLanguage(repo.language) | async as lang;
                else languageName
              "
            >
              <a href="{{ lang.link }}">
                <img
                  src="{{ lang.image }}"
                  alt="{{ lang.name }}"
                  title="Linguagem: {{ lang.name }}"
                />
              </a>
            </ng-container>
            <ng-template #languageName>
              {{ repo.language }}
            </ng-template>
          </div>
        </td>
        <td colspan="2">{{ repo.description }}</td>
      </tr>
    </tbody>
  </table>
</div>
<div id="footer">
  <a href="{{ link }}">
    <div>
      <img
        src="assets/img/github/mark/GitHub-Mark-Light-32px.png"
        title="Acesse a página no GitHub"
      />
      <h4>GitHub</h4>
    </div>
  </a>
</div>
